(self.webpackChunkcrab_plo_rewards=self.webpackChunkcrab_plo_rewards||[]).push([[448],{2258:function(e,t,n){"use strict";n.d(t,{JH:function(){return o},WA:function(){return c},Xg:function(){return i}});var s=n(2791),a=n(184),r=function(e){return(0,a.jsx)("div",{className:"container mx-auto h-screen relative pb-14 ".concat(e.className),children:e.children})},i=s.memo(r),l=function(e){return(0,a.jsx)("div",{className:"pt-6 page-content-height ".concat(e.className),children:e.children})},o=s.memo(l),c=function(){return(0,a.jsxs)("div",{className:"absolute top-auto bottom-0 h-12 w-full flex justify-center items-center space-x-3",children:[(0,a.jsx)("span",{children:"Copyright\xa92022"}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)("a",{href:"https://github.com/darwinia-network/crab-plo-rewards",target:"_blank",rel:"noopener noreferrer",children:"Github"}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)("a",{href:"https://crab.network/plo_contribute",target:"_blank",rel:"noopener noreferrer",children:"PLO"})]})}},9478:function(e,t,n){"use strict";n.d(t,{UM:function(){return d},PQ:function(){return u},Xq:function(){return f},x5:function(){return x}});var s,a,r,i=n(168),l=n(5395),o=n.n(l),c=n(7570),d=(new(o())("0.00000001"),new(o())("1000000000000")),u=(0,c.Ps)(s||(s=(0,i.Z)(["\n  query GetContributorsPower($first: Int!, $offset: Int!) {\n    crowdloanWhoStatistics(orderBy: TOTAL_BALANCE_DESC, first: $first, offset: $offset) {\n      totalCount\n      pageInfo{\n        hasNextPage\n      }\n      nodes {\n        user\n        totalPower\n        totalBalance\n      }\n    }\n  }\n"]))),f=(0,c.Ps)(a||(a=(0,i.Z)(["\n  query GetReferralsPower($first: Int!, $offset: Int!) {\n    crowdloanReferStatistics(first: $first, offset: $offset) {\n      totalCount\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        user\n        totalPower\n        totalBalance\n      }\n    }\n  }\n"]))),x=(0,c.Ps)(r||(r=(0,i.Z)(["\n  query GetUserNftClaimed($first: Int!, $offset: Int!) {\n    remarkedNftAddresses(orderBy: [EXTRINSIC_TIMESTAMP_ASC], first: $first, offset: $offset) {\n      totalCount\n      pageInfo {\n        hasNextPage\n      }\n      nodes {\n        signer\n        addressValue\n        extrinsicHash\n      }\n    }\n  }\n"])))},8576:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var s=n(5861),a=n(9439),r=n(7757),i=n.n(r),l=n(2791),o=n(4685),c=n(199),d=n(148),u=n(8164),f=n(1358),x=n(1413),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},h=n(4291),g=function(e,t){return l.createElement(h.Z,(0,x.Z)((0,x.Z)({},e),{},{ref:t,icon:m}))};g.displayName="QuestionCircleOutlined";var j=l.forwardRef(g),v=n(5046),C=n(5485),N=n(1707),p=n(7253),b=n(184),w=[{title:"Index",dataIndex:"index",key:"index",align:"center"},{title:"Address",dataIndex:"address",key:"address",align:"center",render:function(e){return(0,b.jsx)(C.Z.Text,{copyable:{text:e},children:(0,p.sC)(e)})}},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["As Contributor",(0,b.jsx)(d.Z,{title:"\u4f5c\u4e3aContributor\u8d21\u732e\u7684KSM",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"ksmAsContributor",key:"ksmAsContributor",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["As Referral",(0,b.jsx)(d.Z,{title:"\u4f5c\u4e3a\u63a8\u8350\u8005\u8d21\u732e\u7684KSM",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"ksmAsReferral",key:"ksmAsReferral",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Stage CRAB",(0,b.jsx)(d.Z,{title:"\u4e58\u5b8c10%\u4e4b\u540e\u5e94\u53d1\u7684CRAB",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"stageCRabRewards",key:"stageCRabRewards",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Stage CKTON",(0,b.jsx)(d.Z,{title:"\u4e58\u5b8c10%\u4e4b\u540e\u5e94\u53d1\u7684CKTON",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"stageCKtonRewards",key:"stageCKtonRewards",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Sent(CRAB)",(0,b.jsx)(d.Z,{title:"\u5df2\u7ecf\u53d1\u51fa\u53bb\u7684CRAB",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"sentCRab",key:"sentCRab",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Sent(CKTON)",(0,b.jsx)(d.Z,{title:"\u5df2\u7ecf\u53d1\u51fa\u53bb\u7684CKTON",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"sentKton",key:"sentKton",align:"right"},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Differ(CRAB)",(0,b.jsx)(d.Z,{title:"\u7b49\u4e8e\u300cStage CRAB\u300d\u51cf\u53bb\u300cSent(CRAB)\u300d\u3002\u7ea2\u8272\u8868\u793a\u53d1\u591a\u4e86\uff0c\u7eff\u8272\u8868\u793a\u672a\u53d1\u7684\u6570\u91cf",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"differCrab",key:"differCrab",align:"right",render:function(e){return(0,b.jsx)(C.Z.Text,{type:"0.00000000"===e||"-0.00000000"===e?"secondary":e.startsWith("-")?"danger":"success",children:e})}},{title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Differ(CKTON)",(0,b.jsx)(d.Z,{title:"\u7b49\u4e8e\u300cStage CKTON\u300d\u51cf\u53bb\u300cSent(CKTON)\u300d\u3002\u7ea2\u8272\u8868\u793a\u53d1\u591a\u4e86\uff0c\u7eff\u8272\u8868\u793a\u672a\u53d1\u7684\u6570\u91cf",children:(0,b.jsx)(j,{className:"ml-1"})})]}),dataIndex:"differKton",key:"differKton",align:"right",render:function(e){return(0,b.jsx)(C.Z.Text,{type:"0.00000000"===e||"-0.00000000"===e?"secondary":e.startsWith("-")?"danger":"success",children:e})}}],Z=function(e){var t=e.dataSource,n=e.loading;return(0,b.jsx)(N.Z,{columns:w,dataSource:t,loading:n,pagination:{defaultPageSize:50,showQuickJumper:!0,showLessItems:!0,total:t.length,showTotal:function(e){return"Total Items: ".concat(e)}},scroll:{y:"calc(100vh - 20rem)",x:"max-content"}})},S=l.memo(Z),y=n(2258),R=n(9478),k=n(6871),A=function(){var e=(0,v.x)(),t=(0,k.s0)(),r=(0,l.useState)(!1),x=(0,a.Z)(r,2),m=x[0],h=x[1],g=(0,l.useState)([]),C=(0,a.Z)(g,2),N=C[0],w=C[1],Z=(0,l.useState)("0"),A=(0,a.Z)(Z,2),T=A[0],I=A[1],K=(0,l.useState)(Number(0).toFixed(8)),B=(0,a.Z)(K,2),P=B[0],O=B[1],q=(0,l.useState)(Number(0).toFixed(8)),$=(0,a.Z)(q,2),M=$[0],_=$[1],L=(0,l.useState)(Number(0).toFixed(8)),U=(0,a.Z)(L,2),W=U[0],V=U[1],D=(0,l.useState)(Number(0).toFixed(8)),E=(0,a.Z)(D,2),F=E[0],H=E[1],Q=(0,l.useState)(Number(0).toFixed(8)),z=(0,a.Z)(Q,2),X=z[0],G=z[1],J=(0,l.useState)([]),Y=(0,a.Z)(J,2),ee=Y[0],te=Y[1],ne=function(){var t=(0,s.Z)(i().mark((function t(){var s,a,r,l,c,d,u,f,x;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(!0),t.next=4,e.query({query:R.Xq,variables:{first:0,offset:0}});case 4:return u=t.sent,t.next=7,e.query({query:R.PQ,variables:{first:0,offset:0}});case 7:f=t.sent,(null===(s=u.data)||void 0===s?void 0:s.crowdloanReferStatistics.totalCount)!==(null===(a=u.data)||void 0===a?void 0:a.crowdloanReferStatistics.nodes.length)&&o.Z.warning({message:"Query Subql As referral",description:"nodes length doesnt equal to total count"}),(null===(r=f.data)||void 0===r?void 0:r.crowdloanWhoStatistics.totalCount)!==(null===(l=f.data)||void 0===l?void 0:l.crowdloanWhoStatistics.nodes.length)&&o.Z.warning({message:"Query Subql As Contributor",description:"nodes length doesnt equal to total count"}),(x=new Worker(new URL(n.p+n.u(70),n.b))).onerror=function(e){x.terminate(),console.error("worker error:",e.message)},x.onmessage=function(e){x.terminate();var t=e.data,n=t.totalPower,s=t.totalBalance,a=t.csvRows,r=t.rewardsTableDataSource,i=t.totalStageCRab,l=t.totalStageCKton,o=t.totalCrabNextSend,c=t.totalKtonNextSend;I(n),O(s),w(a),_(i),V(l),H(o),G(c),te(r),h(!1)},x.postMessage([(null===(c=f.data)||void 0===c?void 0:c.crowdloanWhoStatistics.nodes)||[],(null===(d=u.data)||void 0===d?void 0:d.crowdloanReferStatistics.nodes)||[]]),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(0),console.error(t.t0),o.Z.error({message:"Oops, something went wrong",description:t.t0.message}),h(!1);case 21:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return(0,b.jsxs)(y.Xg,{children:[(0,b.jsxs)(y.JH,{children:[(0,b.jsx)("div",{className:"flex items-center justify-center space-x-24 mb-2",children:(0,b.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,b.jsx)(c.Z,{loading:m,value:T,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total Power",(0,b.jsx)(d.Z,{title:"Contributors\u548cReferrals\u7684Power\u603b\u548c",children:(0,b.jsx)(j,{className:"ml-1"})})]})}),(0,b.jsx)(c.Z,{loading:m,value:P,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total Contribute",(0,b.jsx)(d.Z,{title:"Contributors\u8d21\u732e\u7684\u603bKSM",children:(0,b.jsx)(j,{className:"ml-1"})})]})}),(0,b.jsx)(c.Z,{loading:m,value:M,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total Stage CRAB",(0,b.jsx)(d.Z,{title:"Stage CRAB\u603b\u8ba1",children:(0,b.jsx)(j,{className:"ml-1"})})]})}),(0,b.jsx)(c.Z,{loading:m,value:W,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total Stage CKTON",(0,b.jsx)(d.Z,{title:"Stage CKTON\u603b\u8ba1",children:(0,b.jsx)(j,{className:"ml-1"})})]})}),(0,b.jsx)(c.Z,{loading:m,value:F,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total CRAB Next",(0,b.jsx)(d.Z,{title:"\u8fd8\u9700\u8981\u5171\u8865\u53d1\u8fd9\u4e48\u591aCRAB",children:(0,b.jsx)(j,{className:"ml-1"})})]})}),(0,b.jsx)(c.Z,{loading:m,value:X,title:(0,b.jsxs)("div",{className:"inline-flex items-center",children:["Total CKTON Next",(0,b.jsx)(d.Z,{title:"\u8fd8\u9700\u8981\u5171\u8865\u53d1\u8fd9\u4e48\u591aCKTON",children:(0,b.jsx)(j,{className:"ml-1"})})]})})]})}),(0,b.jsxs)("div",{className:"flex items-end justify-between px-px pb-1",children:[(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(u.Z.Item,{className:"antd-breadcrumb-item",onClick:function(){return t("/")},children:"Home"}),(0,b.jsx)(u.Z.Item,{children:"Rewards"})]}),(0,b.jsxs)("div",{className:"flex justify-end items-end space-x-2 mb-2",children:[(0,b.jsx)(f.Z,{className:"rounded-md",onClick:ne,loading:m,type:"primary",children:"Check All"}),(0,b.jsx)(f.Z,{className:"rounded-md",onClick:function(){(0,p.ns)(N.map((function(e){return e.join(",")})).join("\n"))},disabled:0===N.length,loading:m,children:"Download CSV"})]})]}),(0,b.jsx)(S,{loading:m,dataSource:ee})]}),(0,b.jsx)(y.WA,{})]})},T=l.memo(A)},7253:function(e,t,n){"use strict";n.d(t,{sC:function(){return c},ns:function(){return d},hx:function(){return u}});var s=n(1413),a=n(7762),r=n(5395),i=n.n(r),l=n(4350),o=n(9478),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length&&e.length>12?"".concat(e.slice(0,5),"...").concat(e.slice(e.length-5)):e},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transferx.csv",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data:text/csv;charset=utf-8",s=new Blob(["\ufeff"+e],{type:n}),a=URL.createObjectURL(s),r=document.createElement("a");r.style.display="none",r.href=a,r.download=t,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(a)}),0)},u=function(e,t){var n,r=[],c=[],d=(0,a.Z)(e);try{var u=function(){var e=n.value,s=null===t||void 0===t?void 0:t.find((function(t){return t.signer===e[0]}));c.push({key:0,index:0,address:e[0],ksmContribute:i()(e[1]).div(o.UM).toFixed(8),claimAddress:s?{address:s.addressValue,extrinsicHash:s.extrinsicHash}:null,isClaimed:!!s}),s&&l.UJ(s.addressValue)&&r.push(s.addressValue)};for(d.s();!(n=d.n()).done;)u()}catch(f){d.e(f)}finally{d.f()}return c=c.map((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},{key:t,index:c.length-t})})),{csvRows:r,nftTableDataSource:c}}},6601:function(){}}]);
//# sourceMappingURL=448.f62054af.chunk.js.map