(self.webpackChunkplo_rewards_export=self.webpackChunkplo_rewards_export||[]).push([[784],{756:(e,t,s)=>{"use strict";s.d(t,{K:()=>m});var a=s(2791),n=s(5485),r=s(1707),l=s(7253),i=s(3456),o=s(4350),d=s(184);const c=[{title:"Index",dataIndex:"index",key:"index",align:"center"},{title:"Address",dataIndex:"address",key:"address",align:"center",render:e=>(0,d.jsx)(n.Z.Text,{copyable:{text:e},children:(0,l.QJ)(e)})},{title:"Claim Address",dataIndex:"claimAddress",key:"claimAddress",align:"center",render:e=>e?(0,d.jsxs)("div",{className:"inline-flex space-x-1",children:[(0,d.jsx)(n.Z.Text,{copyable:{text:e.address},type:o.UJ(e.address)?"success":"danger",children:(0,l.QJ)(e.address)}),(0,d.jsx)("span",{children:"\xb7"}),(0,d.jsx)(n.Z.Link,{target:"_blank",href:`${e.network===i._.CRAB?"https://kusama.subscan.io/extrinsic/":"https://polkadot.subscan.io/extrinsic/"}${e.extrinsicHash}`,children:"extrinsic"})]}):(0,d.jsx)(n.Z.Text,{children:"None"})},{title:"Is Claimed",dataIndex:"isClaimed",key:"isClaimed",align:"center",render:e=>(0,d.jsx)(n.Z.Text,{type:e?"success":"secondary",children:e?"Yes":"No"}),filters:[{text:"Yes",value:!0},{text:"No",value:!1}],onFilter:(e,t)=>t.isClaimed===e},{title:"Total Conntribute",dataIndex:"totalContribute",key:"totalContribute",align:"center"}],x=e=>(0,d.jsx)(r.Z,{columns:c,dataSource:e.dataSource,loading:e.loading,pagination:{defaultPageSize:50,showQuickJumper:!0,showLessItems:!0,total:e.dataSource.length,showTotal:e=>`Total Items: ${e}`},scroll:{y:"calc(100vh - 20rem)",x:"max-content"}}),m=a.memo(x)},2258:(e,t,s)=>{"use strict";s.d(t,{JH:()=>o,WA:()=>d,Xg:()=>l});s(756);var a=s(2791),n=s(184);const r=e=>(0,n.jsx)("div",{className:`container mx-auto h-screen relative pb-14 ${e.className}`,children:e.children}),l=a.memo(r),i=e=>(0,n.jsx)("div",{className:`pt-6 page-content-height ${e.className}`,children:e.children}),o=a.memo(i),d=()=>(0,n.jsxs)("div",{className:"absolute top-auto bottom-0 h-12 w-full flex justify-center items-center space-x-3",children:[(0,n.jsx)("span",{children:"Copyright\xa92022"}),(0,n.jsx)("span",{children:"|"}),(0,n.jsx)("a",{href:"https://github.com/darwinia-network/plo-rewards-export",target:"_blank",rel:"noopener noreferrer",children:"Github"}),(0,n.jsx)("span",{children:"|"}),(0,n.jsx)("a",{href:"https://crab.network/plo_contribute",target:"_blank",rel:"noopener noreferrer",children:"Crab PLO"}),(0,n.jsx)("span",{children:"|"}),(0,n.jsx)("a",{href:"https://darwinia.network/plo_contribute",target:"_blank",rel:"noopener noreferrer",children:"Darwinia PLO"})]})},9478:(e,t,s)=>{"use strict";s.d(t,{j9:()=>l,bN:()=>i,rM:()=>o,fD:()=>d,PQ:()=>c,Xq:()=>x,x5:()=>m});var a=s(5395),n=s.n(a),r=s(7743);const l=2e8,i=8e3,o=(new(n())("0.00000001"),new(n())("10000000000"),new(n())("1000000000000"),new(n())("1000000000")),d=42,c=r.Ps`
  query GetContributorsPower($first: Int!, $offset: Int!) {
    crowdloanWhoStatistics(orderBy: TOTAL_BALANCE_DESC, first: $first, offset: $offset) {
      totalCount
      pageInfo {
        hasNextPage
      }
      nodes {
        user
        totalPower
        totalBalance
      }
    }
  }
`,x=r.Ps`
  query GetReferralsPower($first: Int!, $offset: Int!) {
    crowdloanReferStatistics(first: $first, offset: $offset) {
      totalCount
      pageInfo {
        hasNextPage
      }
      nodes {
        user
        totalPower
        totalBalance
      }
    }
  }
`,m=r.Ps`
  query GetUserNftClaimed($first: Int!, $offset: Int!) {
    remarkedNftAddresses(orderBy: [EXTRINSIC_TIMESTAMP_ASC], first: $first, offset: $offset) {
      totalCount
      pageInfo {
        hasNextPage
      }
      nodes {
        signer
        addressValue
        extrinsicHash
      }
    }
  }
`},7430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(2791),n=s(4685),r=s(199),l=s(148),i=s(8164),o=s(1358),d=s(1413);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};var x=s(4291),m=function(e,t){return a.createElement(x.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:t,icon:c}))};m.displayName="QuestionCircleOutlined";const u=a.forwardRef(m);var h=s(5046),f=s(5485),g=s(1707),j=s(7253),w=s(184);const p=[{title:"Index",dataIndex:"index",key:"index",align:"center"},{title:"Address",dataIndex:"address",key:"address",align:"center",render:e=>(0,w.jsx)(f.Z.Text,{copyable:{text:e},children:(0,j.QJ)(e)})},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["As Contributor",(0,w.jsx)(l.Z,{title:"\u4f5c\u4e3aContributor\u8d21\u732e\u7684KSM",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"ksmAsContributor",key:"ksmAsContributor",align:"right"},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["As Referral",(0,w.jsx)(l.Z,{title:"\u4f5c\u4e3a\u63a8\u8350\u8005\u8d21\u732e\u7684KSM",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"ksmAsReferral",key:"ksmAsReferral",align:"right"},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["CRAB Rewards",(0,w.jsx)(l.Z,{title:"\u5e94\u8be5\u83b7\u5f97\u7684CRAB\u5956\u52b1",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"crabRewards",key:"crabRewards",align:"right"},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Stage CRAB",(0,w.jsx)(l.Z,{title:"\u4e58\u5b8c7.5%\u4e4b\u540e\u5e94\u53d1\u7684CRAB",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"stageCRabRewards",key:"stageCRabRewards",align:"right"},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["CKTON Rewards",(0,w.jsx)(l.Z,{title:"\u5e94\u8be5\u83b7\u5f97\u7684CKTON\u5956\u52b1",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"cktonRewards",key:"cktonRewards",align:"right"},{title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Stage CKTON",(0,w.jsx)(l.Z,{title:"\u4e58\u5b8c7.5%\u4e4b\u540e\u5e94\u53d1\u7684CKTON",children:(0,w.jsx)(u,{className:"ml-1"})})]}),dataIndex:"stageCKtonRewards",key:"stageCKtonRewards",align:"right"}],v=e=>{const{dataSource:t,loading:s}=e;return(0,w.jsx)(g.Z,{columns:p,dataSource:t,loading:s,pagination:{defaultPageSize:50,showQuickJumper:!0,showLessItems:!0,total:t.length,showTotal:e=>`Total Items: ${e}`},scroll:{y:"calc(100vh - 20rem)",x:"max-content"}})},C=a.memo(v);var N=s(2258),b=s(9478),y=s(6871);const R=()=>{const e=(0,h.x)(),t=(0,y.s0)(),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)([]),[f,g]=(0,a.useState)("0"),[p,v]=(0,a.useState)(Number(0).toFixed(8)),[R,k]=(0,a.useState)(Number(0).toFixed(8)),[S,A]=(0,a.useState)(Number(0).toFixed(8)),[I,Z]=(0,a.useState)([]);return(0,w.jsxs)(N.Xg,{children:[(0,w.jsxs)(N.JH,{children:[(0,w.jsx)("div",{className:"flex items-center justify-center space-x-24 mb-2",children:(0,w.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,w.jsx)(r.Z,{loading:d,value:f,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total Power",(0,w.jsx)(l.Z,{title:"Contributors\u548cReferrals\u7684Power\u603b\u548c",children:(0,w.jsx)(u,{className:"ml-1"})})]})}),(0,w.jsx)(r.Z,{loading:d,value:p,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total Contribute",(0,w.jsx)(l.Z,{title:"Contributors\u8d21\u732e\u7684\u603bKSM",children:(0,w.jsx)(u,{className:"ml-1"})})]})}),(0,w.jsx)(r.Z,{loading:d,value:b.j9,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total CRAB Rewards",(0,w.jsx)(l.Z,{title:"Stage CRAB\u603b\u8ba1",children:(0,w.jsx)(u,{className:"ml-1"})})]})}),(0,w.jsx)(r.Z,{loading:d,value:b.bN,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total CKTON Rewards",(0,w.jsx)(l.Z,{title:"Stage CRAB\u603b\u8ba1",children:(0,w.jsx)(u,{className:"ml-1"})})]})}),(0,w.jsx)(r.Z,{loading:d,value:R,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total Stage CRAB",(0,w.jsx)(l.Z,{title:"Stage CRAB\u603b\u8ba1",children:(0,w.jsx)(u,{className:"ml-1"})})]})}),(0,w.jsx)(r.Z,{loading:d,value:S,title:(0,w.jsxs)("div",{className:"inline-flex items-center",children:["Total Stage CKTON",(0,w.jsx)(l.Z,{title:"Stage CKTON\u603b\u8ba1",children:(0,w.jsx)(u,{className:"ml-1"})})]})})]})}),(0,w.jsxs)("div",{className:"flex items-end justify-between px-px pb-1",children:[(0,w.jsxs)(i.Z,{children:[(0,w.jsx)(i.Z.Item,{className:"antd-breadcrumb-item",onClick:()=>t("/"),children:"Home"}),(0,w.jsx)(i.Z.Item,{children:"Rewards"})]}),(0,w.jsxs)("div",{className:"flex justify-end items-end space-x-2 mb-2",children:[(0,w.jsx)(o.Z,{className:"rounded-md",onClick:async()=>{try{var t,a,r,l,i,o;c(!0);const d=await e.query({query:b.Xq,variables:{first:0,offset:0}}),x=await e.query({query:b.PQ,variables:{first:0,offset:0}});(null===(t=d.data)||void 0===t?void 0:t.crowdloanReferStatistics.totalCount)!==(null===(a=d.data)||void 0===a?void 0:a.crowdloanReferStatistics.nodes.length)&&n.Z.warning({message:"Query Subql As referral",description:"nodes length doesnt equal to total count"}),(null===(r=x.data)||void 0===r?void 0:r.crowdloanWhoStatistics.totalCount)!==(null===(l=x.data)||void 0===l?void 0:l.crowdloanWhoStatistics.nodes.length)&&n.Z.warning({message:"Query Subql As Contributor",description:"nodes length doesnt equal to total count"});const u=new Worker(new URL(s.p+s.u(425),s.b));u.onerror=e=>{u.terminate(),console.error("worker error:",e.message)},u.onmessage=e=>{u.terminate();const{totalPower:t,totalBalance:s,csvRows:a,rewardsTableDataSource:n,totalStageCRab:r,totalStageCKton:l}=e.data;g(t),v(s),m(a),k(r),A(l),Z(n),c(!1)},u.postMessage([(null===(i=x.data)||void 0===i?void 0:i.crowdloanWhoStatistics.nodes)||[],(null===(o=d.data)||void 0===o?void 0:o.crowdloanReferStatistics.nodes)||[]])}catch(d){console.error(d),n.Z.error({message:"Oops, something went wrong",description:d.message}),c(!1)}},loading:d,type:"primary",children:"Check All"}),(0,w.jsx)(o.Z,{className:"rounded-md",onClick:()=>{(0,j.ns)(x.map((e=>e.join(","))).join("\n"))},disabled:0===x.length,loading:d,children:"Download CSV"})]})]}),(0,w.jsx)(C,{loading:d,dataSource:I})]}),(0,w.jsx)(N.WA,{})]})},k=a.memo(R)},3456:(e,t,s)=>{"use strict";let a;s.d(t,{_:()=>a}),function(e){e[e.CRAB=0]="CRAB",e[e.DARWINIA=1]="DARWINIA"}(a||(a={}))},7253:(e,t,s)=>{"use strict";s.d(t,{QJ:()=>d,j1:()=>x,it:()=>m,ns:()=>u});var a=s(7730),n=s(692),r=s(9453),l=s(8787),i=s(822),o=s(4273);s(5395),s(9478),s(3456);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length&&e.length>12?`${e.slice(0,5)}...${e.slice(e.length-5)}`:e},c=new o.P;function x(e){if(!e)return c.createType("AccountId","");const t=new Uint8Array(32);t.set((0,n.d)("dvm:")),t.set((0,r.G)(e),11);const s=t.reduce(((e,t)=>e^t));t.set((0,l.V)(s),31);return c.createType("AccountId",t)}function m(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||(0,i.F)(t))return"";try{let n=(0,a.m)(e,t);return s&&(n=d(n)),n}catch(n){return""}}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transferx.csv",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data:text/csv;charset=utf-8";const a=new Blob(["\ufeff"+e],{type:s}),n=URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=n,r.download=t,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)}),0)}},6601:()=>{}}]);
//# sourceMappingURL=784.6d359b73.chunk.js.map